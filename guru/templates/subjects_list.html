{% extends 'base.html' %}
{% load static %}
{% block title %} Home view {% endblock %}
{% load crispy_forms_tags %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/homepage.css' %}">
{% endblock %}
{% block content %}
<div>	
	{% include 'snippets/navigation.html' %}
    {% if form %}
        <div class="messages mt-4 container">
    	    <center> 
				<button onclick="on(document.getElementsByClassName('overlay')[0])" id="add-subject-btn"> 
					Add a subject
				</button>
			<center><br>

            {% for message in messages %}
                <div class='alert alert-{{ message.tags }} alert-dismissible fade show'>
                    {{ message }} 
                      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                </div>
            {% endfor %}
        </div>
    {% endif %}

	<div class="container-fluid">
		{% if form %}
		<div class="overlay">
			<form style="width:300px;"class="overlayform" action="/guru/{{classroom.unique_id}}/" 
				method="POST" enctype="multipart/form-data">
				<a onclick="off(document.getElementsByClassName('overlay')[0])" id="close"> &times;</a><br><br>
				{% csrf_token %}
				<input type="text" name="subject_name" placeholder="Add a subject."
						maxlength="50" required id="id_subject_name"><br>
				<input type="text" name="teacher" placeholder="username of teacher."><br>
				<center>
					<input type="submit" class="btn btn-success text-white" value="Add">
				</center>
			</form>
		</div>
		{% endif %}

		{% if subjects %}
		<br>
		<div class="row">
			{% for subject in subjects %}
			<div class="col-xs-12 col-md-6 col-lg-4">
				<a class="text-center" style="color:white;"
					href="{% url 'resources' classroom.unique_id subject.id  %}">
				<div class="subject-container">
				  <img src="{{subject.subject_pic.url }}" alt="Notebook" style="width:100%;height:350px;">
				  <div class="content">
					    <h1>{{ subject|upper }}</h1>
					    <p>by {{subject.teacher }}</p>
				  </div>
				</div>
				</a>
			</div>
			{% endfor %}
		</div>
		{% else %}
			{% if is_admin %}
				<h1 class="text-center text-danger"> 
					No subject is added yet. Kindly add a subject so your students can study. 
				</h1>
			{% else %}
				<h1 class="text-center text-danger"> 
					No subject is added yet. Kindly ask your admin to add a subject. 
				</h1>
			{% endif %}
		{% endif %}
		</div>
	</div>
	<!-- Subjects end  -->
</div>
{% endblock %}