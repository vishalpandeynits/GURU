{% extends 'subject_page.html' %}
{% load crispy_forms_tags %}
{% block subject_content %}
{% load humanize %}
{% load comments %}
<div class="container">
	<div id="note-contain">
		{% if is_teacher %}
			<a class="btn btn-danger m-2 float-right" 
				style="border:none;color:white;background:red;padding: 7px;" 
				href="{% url 'delete_resource' classroom.unique_id subject.id note.id %}">
				Delete <i class="fa fa-trash" aria-hidden="true"></i>
			</a>

			<a class="btn btn-dark m-2 float-right" 
				style="border:none;color:white;padding: 7px;" href="/profile/{{note.uploaded_by}}">
					Contact <i class="fas fa-phone-volume"></i>
			</a>

			<a @click="formToggle" style="border:none;color:white;background:black;padding: 7px;"
			 	class="btn m-2 float-right">Update <i class="fas fa-edit"></i>
			</a><br><br>

		    <form method="POST" v-if="showUpdateForm" class="addForm" 
		    	 enctype="multipart/form-data">{% csrf_token %}
				 {{ updateform|crispy }}
				 <input type="submit" class="submit-button" value="submit">
		    </form>
		{% endif %}<br>
	</div>

	<div id="note-content">
		<p style="font-weight: bold;text-align: center;font-size:1.2em;">
			{{note.topic}}
		</p>
		{% if note.file %}
			{% if extension == 'image' %}
				<center>
					<a href="{{note.file.url}}">
						<img src="{{note.file.url}}" height="500" width="500">
					</a>
				</center> 
			{% elif extension == 'video' %}
				<center> 
					<video height="300" width="500" style="border:0;outline:0;" controls>
					  <source src="{{note.file.url}}" type="video/mp4">
					  <source src="{{note.file.url}}" type="video/ogg">
					Your browser does not support the video tag.
					</video><br>
				<a href="{{note.file.url}}" download> Download file</a>
				</center>
			{% else %}
				<a href="{{note.file.url}}" download> Download file</a>
			{% endif %}
		{% endif %}
		
		<pre>{{ note.description }}</pre>
	</div><br>
	{% include 'comments/read_notecomment.html' %}
</div>
{% endblock %}